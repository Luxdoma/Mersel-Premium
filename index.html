<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Реалистичная VR сцена</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe-environment-component/1.3.2/aframe-environment-component.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe-extras/6.1.1/aframe-extras.min.js"></script>
  
  <script>
    // Компонент для плавного вращения объекта
    AFRAME.registerComponent('rotate-animation', {
      schema: {
        speed: {type: 'number', default: 1}
      },
      tick: function (time, deltaTime) {
        const rotationSpeed = this.data.speed * (deltaTime / 1000);
        const currentRotation = this.el.object3D.rotation;
        this.el.object3D.rotation.set(
          currentRotation.x,
          currentRotation.y + rotationSpeed,
          currentRotation.z
        );
      }
    });
    
    // Компонент для интерактивности
    AFRAME.registerComponent('change-color-on-hover', {
      init: function () {
        const el = this.el;
        const originalColor = el.getAttribute('material').color;
        
        el.addEventListener('mouseenter', function () {
          el.setAttribute('material', 'color', '#FF6B6B');
          el.setAttribute('animation__scale', {
            property: 'scale',
            to: '1.2 1.2 1.2',
            dur: 300,
            easing: 'easeOutQuad'
          });
        });
        
        el.addEventListener('mouseleave', function () {
          el.setAttribute('material', 'color', originalColor);
          el.setAttribute('animation__scale', {
            property: 'scale',
            to: '1 1 1',
            dur: 300,
            easing: 'easeOutQuad'
          });
        });
      }
    });
  </script>
</head>
<body>
  <a-scene>
    <!-- Реалистичное окружение -->
    <a-entity environment="preset: forest; lighting: false; shadow: true; lightPosition: 1 5 -2; ground: hills; groundColor: #402A04; groundColor2: #593B17; dressingAmount: 500; grid: none;"></a-entity>
    
    <!-- Освещение -->
    <a-entity light="type: ambient; color: #BBB; intensity: 0.5"></a-entity>
    <a-entity light="type: directional; color: #FFF; intensity: 1.2; castShadow: true" position="1 5 -2"></a-entity>
    <a-entity light="type: point; color: #FFE8C9; intensity: 0.8; distance: 20" position="-1 6 -3"></a-entity>
    
    <!-- Реалистичный дом -->
    <a-entity position="0 0 -8">
      <!-- Основа дома -->
      <a-box width="5" height="3" depth="4" material="shader: standard; roughness: 0.7; metalness: 0.1; src: https://cdnjs.cloudflare.com/ajax/libs/3dmodels/1.0.0/textures/brick/brick_diffuse.jpg; repeat: 5 3" shadow></a-box>
      
      <!-- Крыша -->
      <a-entity position="0 2 0" rotation="0 0 0">
        <a-box width="6" height="0.2" depth="5" position="0 0.5 0" material="shader: standard; roughness: 0.9; metalness: 0.1; color: #4A3B2A" shadow></a-box>
        <a-entity position="0 0.6 0">
          <a-box width="6" height="1.5" depth="5" scale="1 1 1" material="shader: standard; roughness: 0.9; metalness: 0.1; color: #4A3B2A" geometry="primitive: box; width: 6; height: 1.5; depth: 5"
                 position="0 0.75 0" shadow></a-box>
        </a-entity>
      </a-entity>
      
      <!-- Дверь -->
      <a-entity position="0 0 2.01" rotation="0 0 0">
        <a-box width="1" height="2" depth="0.1" material="shader: standard; roughness: 0.5; metalness: 0.1; color: #5C4033" shadow></a-box>
        <a-sphere position="0.35 0 0" radius="0.05" material="shader: standard; roughness: 0.2; metalness: 0.8; color: #DDDDDD" shadow></a-sphere>
      </a-entity>
      
      <!-- Окна -->
      <a-entity position="-1.5 0.5 2.01">
        <a-box width="1" height="1" depth="0.1" material="shader: standard; roughness: 0.2; metalness: 0.1; color: #AADDFF; opacity: 0.9" shadow></a-box>
        <a-box width="1.1" height="1.1" depth="0.05" material="shader: standard; roughness: 0.5; metalness: 0.1; color: #FFFFFF" shadow></a-box>
      </a-entity>
      
      <a-entity position="1.5 0.5 2.01">
        <a-box width="1" height="1" depth="0.1" material="shader: standard; roughness: 0.2; metalness: 0.1; color: #AADDFF; opacity: 0.9" shadow></a-box>
        <a-box width="1.1" height="1.1" depth="0.05" material="shader: standard; roughness: 0.5; metalness: 0.1; color: #FFFFFF" shadow></a-box>
      </a-entity>
    </a-entity>
    
    <!-- Дерево -->
    <a-entity position="5 0 -6">
      <a-cylinder height="4" radius="0.3" material="shader: standard; roughness: 0.9; metalness: 0.1; src: https://cdnjs.cloudflare.com/ajax/libs/3dmodels/1.0.0/textures/wood/wood_texture.jpg" position="0 2 0" shadow></a-cylinder>
      <a-entity position="0 4.5 0">
        <a-cone height="4" radius-bottom="2" radius-top="0" material="shader: standard; roughness: 0.8; metalness: 0; color: #1B512D" shadow></a-cone>
      </a-entity>
    </a-entity>
    
    <!-- Камень -->
    <a-entity position="-4 0.6 -5">
      <a-sphere radius="1" material="shader: standard; roughness: 0.9; metalness: 0.1; color: #777777" shadow change-color-on-hover></a-sphere>
    </a-entity>
    
    <!-- Вода (озеро) -->
    <a-entity position="0 0.1 -15">
      <a-circle radius="7" rotation="-90 0 0" material="shader: standard; roughness: 0.1; metalness: 0.6; color: #3079B4; opacity: 0.9"></a-circle>
    </a-entity>
    
    <!-- Интерактивная сфера -->
    <a-entity position="-2 1 -4">
      <a-sphere radius="0.5" material="shader: standard; roughness: 0.3; metalness: 0.8; color: #4285F4" shadow change-color-on-hover rotate-animation="speed: 0.5"></a-sphere>
    </a-entity>
    
    <!-- Камера с управлением движением -->
    <a-entity position="0 1.6 2" movement-controls="fly: true; speed: 0.2">
      <a-entity camera look-controls wasd-controls position="0 0 0">
        <a-entity cursor="fuse: true; fuseTimeout: 500" position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
                  material="color: white; shader: flat"
                  animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"
                  animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
                  animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1">
        </a-entity>
      </a-entity>
    </a-entity>
    
    <!-- Птицы в небе -->
    <a-entity position="0 15 -10">
      <a-entity position="-5 0 0" animation="property: position; to: 5 2 -5; dur: 12000; easing: linear; loop: true">
        <a-entity geometry="primitive: triangle; vertexA: 0 0 0; vertexB: -0.5 -0.25 0; vertexC: 0.5 -0.25 0" material="shader: flat; color: #000"></a-entity>
      </a-entity>
      <a-entity position="3 1 2" animation="property: position; to: -7 3 -3; dur: 14000; easing: linear; loop: true">
        <a-entity geometry="primitive: triangle; vertexA: 0 0 0; vertexB: -0.4 -0.2 0; vertexC: 0.4 -0.2 0" material="shader: flat; color: #000"></a-entity>
      </a-entity>
      <a-entity position="0 -1 -2" animation="property: position; to: -10 1 -8; dur: 13000; easing: linear; loop: true">
        <a-entity geometry="primitive: triangle; vertexA: 0 0 0; vertexB: -0.3 -0.15 0; vertexC: 0.3 -0.15 0" material="shader: flat; color: #000"></a-entity>
      </a-entity>
    </a-entity>
  </a-scene>
</body>
</html>